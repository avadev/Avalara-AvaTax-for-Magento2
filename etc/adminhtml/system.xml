<?xml version="1.0"?>
<!--
/**
 * ClassyLlama_AvaTax
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/osl-3.0.php
 *
 * @copyright  Copyright (c) 2016 Avalara, Inc.
 * @license    http://opensource.org/licenses/osl-3.0.php Open Software License (OSL 3.0)
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Config:etc/system_file.xsd">
    <system>
        <section id="tax">
            <group id="avatax_general" translate="label" sortOrder="6" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>AvaTax - General</label>
                <comment><![CDATA[For complete and up-to-date documentation, please visit <a href="https://github.com/avadev/Avalara-AvaTax-for-Magento2/blob/master/docs/getting-started.md" target="_blank">github.com/avadev/Avalara-AvaTax-for-Magento2/blob/master/docs/getting-started.md</a>.</p>
                    ]]></comment>
                <field id="avatax_extension_version" translate="label" type="label" sortOrder="1000" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>AvaTax Extension Version:</label>
                    <comment model="ClassyLlama\AvaTax\Model\Config\Comment" />
                </field>
                <field id="enabled" translate="label" type="select" sortOrder="1000" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/enabled</config_path>
                    <label>Enable AvaTax</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                </field>
                <field id="tax_settings_header" translate="label" type="label" sortOrder="1001" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label><![CDATA[<strong>Tax Calculation Settings</strong>]]></label>
                    <!-- Reference: https://github.com/magento/magento2/issues/2340
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                    -->
                </field>
                <field id="tax_included" translate="label" type="select" sortOrder="1002" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/tax_included</config_path>
                    <label>Taxation Policy</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\TaxIncluded</source_model>
                    <frontend_model>ClassyLlama\AvaTax\Block\Adminhtml\System\Config\TaxIncluded</frontend_model>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="tax_mode" translate="label" type="select" sortOrder="1003" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/tax_mode</config_path>
                    <label>Tax Mode</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\TaxMode</source_model>
                    <comment><![CDATA[<ul><li><strong>Disabled</strong> — AvaTax tax estimation will be disabled and native Magento tax estimation will be used. Only use this option if you want to use Address Validation without tax estimation.</li><li><strong>Estimate Tax</strong> — AvaTax tax estimation will run during checkout, but completed orders will not be submitted to AvaTax.</li><li><strong>Estimate Tax & Submit Transactions to AvaTax</strong> — AvaTax tax estimation will run during checkout and invoices and credit memos will be submitted to AvaTax.</li></ul>]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="commit_submitted_transactions" translate="label" type="select" sortOrder="1004" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/commit_submitted_transactions</config_path>
                    <label>Commit Submitted Transactions</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment><![CDATA[Should transactions sent to AvaTax be committed? Only change to <strong>No</strong> if you have specific reason to do so.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="tax_mode">3</field>
                    </depends>
                </field>
                <field id="tax_calculation_countries_enabled" translate="label comment" type="multiselect" sortOrder="1005" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/tax_calculation_countries_enabled</config_path>
                    <label>Taxable Countries</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\TaxCalculationCountries</source_model>
                    <!--<source_model>Magento\Directory\Model\Config\Source\Country</source_model>-->
                    <comment><![CDATA[Select which countries to enable for tax calculation (address verification countries are <a href="#row_tax_avatax_address_validation_header">configured below</a>).]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="tax_mode" negative="1">1</field>
                    </depends>
                </field>
                <field id="filter_tax_by_region" translate="label" type="select" sortOrder="1006" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/filter_tax_by_region</config_path>
                    <label>Filter Tax Calculation By Region</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment><![CDATA[Should tax calculation only apply to certain regions? Only change this to <strong>Yes</strong> if you have a specific reason to do so. See the [documentation](https://github.com/avadev/Avalara-AvaTax-for-Magento2/blob/develop/docs/sales-tax.md#filter_by_region) for more details.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="tax_mode" negative="1">1</field>
                    </depends>
                </field>
                <field id="region_filter_list" translate="label" type="multiselect" sortOrder="1007" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/region_filter_list</config_path>
                    <label>Enabled Regions</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\RegionFilterList</source_model>
                    <comment><![CDATA[Select regions where you want AvaTax tax calculation to apply. Unselected regions will use native Magento tax calculation. If you change the selection of the <strong>Taxable Countries</strong> field, you must save this page for this region list to update.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="tax_mode" negative="1">1</field>
                        <field id="filter_tax_by_region">1</field>
                    </depends>
                </field>
                <field id="calculate_tax_before_discounts" translate="label" type="select" sortOrder="1008" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/calculate_tax_before_discounts</config_path>
                    <label>Calculate Tax Before Discount</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment><![CDATA[Should tax be calculated on each item before discounts are applied ]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="tax_mode" negative="1">1</field>
                    </depends>
                </field>
                <field id="connection_settings_header" translate="label" type="label" sortOrder="1010" showInDefault="1" showInWebsite="0" showInStore="0">
                    <label><![CDATA[<strong>Connection Settings</strong>]]></label>
                    <!-- Reference: https://github.com/magento/magento2/issues/2340
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                    -->
                </field>
                <field id="live_mode" translate="label" type="select" sortOrder="1020" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/live_mode</config_path>
                    <label>Mode</label>
                    <comment><![CDATA[The mode you select will determine whether the <strong>Production</strong> or <strong>Development</strong> credentials will be used. You will get your Account Number, License Key, and Company Code from your AvaTax representative. If <strong>Production</strong> is selected, then https://avatax.avalara.net will be used as the API url. If <strong>Development</strong> is selected, then https://development.avalara.net will be used as the API url.<br><br>When you save this page, if you have entered credentials below for the selected mode, the AvaTax API will be pinged to ensure the credentials are working.]]></comment>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\Mode</source_model>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="production_account_number" translate="label" type="text" sortOrder="1030" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/production_account_number</config_path>
                    <label>Account Number (Production)</label>
                    <backend_model>Magento\Config\Model\Config\Backend\Encrypted</backend_model>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="production_license_key" translate="label" type="obscure" sortOrder="1040" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/production_license_key</config_path>
                    <label>License Key (Production)</label>
                    <backend_model>Magento\Config\Model\Config\Backend\Encrypted</backend_model>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="production_company_id" translate="label" type="select" sortOrder="1050" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/production_company_id</config_path>
                    <label>Company (Production)</label>
                    <frontend_model>productionCompanyCodeFrontendModel</frontend_model>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\CompanyCode</source_model>
                    <comment><![CDATA[Choose the company to use. If you don't see values in this dropdown, then enter values into the <strong>Account Number</strong> and <strong>License Key</strong> fields above.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="development_account_number" translate="label" type="text" sortOrder="1060" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/development_account_number</config_path>
                    <label>Account Number (Development)</label>
                    <backend_model>Magento\Config\Model\Config\Backend\Encrypted</backend_model>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="development_license_key" translate="label" type="obscure" sortOrder="1070" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/development_license_key</config_path>
                    <label>License Key (Development)</label>
                    <backend_model>Magento\Config\Model\Config\Backend\Encrypted</backend_model>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="development_company_id" translate="label" type="select" sortOrder="1080" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/development_company_id</config_path>
                    <label>Company (Development)</label>
                    <frontend_model>developmentCompanyCodeFrontendModel</frontend_model>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\CompanyCode</source_model>
                    <comment><![CDATA[Choose the company to use. If you don't see values in this dropdown, then enter values into the <strong>Account Number</strong> and <strong>License Key</strong> fields above.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>

                <!-- This code scope needed for Magento 2.3.2 and later. Magento team added extra private method (filterNodes($configData)) to Magento\Config\Controller\Adminhtml\System\Config\Save for validation the file system.xml before save configuration data to the database.
                     For the successful pass of the validation, there was added the declarative code. -->

                <!-- Start -->
                <field id="production_company_code" type="hidden">
                    <config_path>tax/avatax/production_company_code</config_path>
                    <label>Company Code (Production)</label>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="development_company_code" type="hidden" >
                    <config_path>tax/avatax/development_company_code</config_path>
                    <label>Company Code (Development)</label>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <!-- End -->

                <field id="data_mapping_header" translate="label" type="label" sortOrder="3000" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label><![CDATA[<strong>Data Mapping</strong>]]></label>
                    <!-- Reference: https://github.com/magento/magento2/issues/2340
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                    -->
                </field>
                <field id="customer_code_format" translate="label comment" type="select" sortOrder="3010" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/customer_code_format</config_path>
                    <label>Customer Code Format</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\CustomerCode</source_model>
                    <comment><![CDATA[Select a format for customers to be identified in AvaTax. Available options will include any customer attributes that exist in Magento. If the customer doesn't have a value defined for the selected attribute when their transaction is processed and sent to Avalara, their customer (or guest) ID will be used instead. Once the integration is live, this setting should not be changed.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="upc_attribute" translate="label comment" type="select" sortOrder="3020" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/upc_attribute</config_path>
                    <label>UPC Attribute To Use As Item Code</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\Product\Attributes</source_model>
                    <comment><![CDATA[Optional. By default, this extension sends the Magento product SKU to the AvaTax <strong>ItemCode</strong> field. However if you want to use a UPC product attribute as the AvaTax ItemCode, select which attribute above maps to your UPC attribute. If a UPC attribute is present on a product, it will be used as the AvaTax ItemCode and will be prepended with "UPC: ". Otherwise the product's SKU will be sent. Sending the UPC in the ItemCode field will allow you to bypass the Avalara Tax Code selection and mapping in your product record. The UPC, when sent in the ItemCode field, maps directly to the Avalara Product Tax Code so you don’t have to map those codes separately.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="ref1_attribute" translate="label comment" type="select" sortOrder="3030" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/ref1_attribute</config_path>
                    <label>Ref1 Attribute</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\Product\Attributes</source_model>
                    <comment><![CDATA[Optional. AvaTax allows you to pass arbitrary information into two reference fields for each line item. Select a text type product attribute to be sent to AvaTax in the <strong>Ref1</strong> field. Only the first 250 characters of this attribute will be sent to AvaTax.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="ref2_attribute" translate="label comment" type="select" sortOrder="3040" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/ref2_attribute</config_path>
                    <label>Ref2 Attribute</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\Product\Attributes</source_model>
                    <comment><![CDATA[Optional. AvaTax allows you to pass arbitrary information into two reference fields for each line item. Select a text type product attribute to be sent to AvaTax in the <strong>Ref2</strong> field. Only the first 250 characters of this attribute will be sent to AvaTax.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="use_business_identification_number" translate="label comment" type="select" sortOrder="3050" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/use_business_identification_number</config_path>
                    <label>Submit VAT Number to AvaTax</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment><![CDATA[Set this to <strong>Yes</strong> if you want to send VAT tax numbers to AvaTax to affect tax calculation. If a guest or customer has a <strong>VAT number</strong> set on their Magento shipping address, it will be used. Otherwise the <strong>Tax/VAT Number</strong> attribute value from the customer record will be used. If a VAT number is not found, nothing will be sent. The VAT number will be sent to the <strong>BusinessIdentificationNo</strong> field in AvaTax.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="vat_transport" translate="label" sortOrder="3055" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Submit VAT Transport</label>
                    <frontend_model>ClassyLlama\AvaTax\Block\Adminhtml\Form\Field\Transport</frontend_model>
                    <backend_model>Magento\Config\Model\Config\Backend\Serialized\ArraySerialized</backend_model>
                </field>
                <field id="location_code" translate="label" type="text" sortOrder="3060" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/location_code</config_path>
                    <label>Location Code</label>
                    <frontend_class>validate-length maximum-length-50</frontend_class>
                    <comment><![CDATA[Optional, unless outlet-based reporting is needed. Location code is a value assigned by some State jurisdictions that identifies a particular store location. These States may require tax liabilities to be broken out separately for each store Location. Read more in the <a href="https://help.avalara.com/000_AvaTax_Calc/000AvaTaxCalc_User_Guide/0C0_Add_Locations/Manage_Locations" target="_blank">AvaTax documentation</a>.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                 <field id="shipping_tax_code" translate="label" type="text" sortOrder="3065" showInDefault="1" showInWebsite="1" showInStore="1" canRestore="1">
                    <config_path>tax/avatax/shipping_tax_code</config_path>
                    <label>Shipping Tax Code</label>
                    <comment>The Avalara tax code used to classify the shipping service type.</comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="sku_shipping" translate="label" type="text" sortOrder="3070" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/sku_shipping</config_path>
                    <label>Shipping SKU</label>
                    <comment>The SKU sent to denote shipping costs.</comment>
                    <frontend_class>required-entry validate-length maximum-length-50</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="sku_adjustment_positive" translate="label" type="text" sortOrder="3080" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/sku_adjustment_positive</config_path>
                    <label>Adjustment Refund SKU</label>
                    <comment>The SKU sent to denote positive adjustments on Credit Memos.</comment>
                    <frontend_class>required-entry validate-length maximum-length-50</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="sku_adjustment_negative" translate="label" type="text" sortOrder="3090" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/sku_adjustment_negative</config_path>
                    <label>Adjustment Fee SKU</label>
                    <comment>The SKU sent to denote negative adjustments on Credit Memos.</comment>
                    <frontend_class>required-entry validate-length maximum-length-50</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="sku_gift_wrap_order" translate="label" type="text" sortOrder="3100" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/sku_gift_wrap_order</config_path>
                    <label>Gift Wrap Order SKU</label>
                    <comment>The SKU sent AvaTax to denote gift wrap order costs. Only relevant for Magento Enterprise.</comment>
                    <frontend_class>required-entry validate-length maximum-length-50</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="sku_gift_wrap_item" translate="label" type="text" sortOrder="3110" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/sku_gift_wrap_item</config_path>
                    <label>Gift Wrap Items SKU</label>
                    <comment>The SKU sent AvaTax to denote gift wrap item costs. Only relevant for Magento Enterprise.</comment>
                    <frontend_class>required-entry validate-length maximum-length-50</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="sku_gift_wrap_card" translate="label" type="text" sortOrder="3120" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/sku_gift_wrap_card</config_path>
                    <label>Gift Wrap Printed Card SKU</label>
                    <comment>The SKU sent to denote gift wrap printed card costs. Only relevant for Magento Enterprise.</comment>
                    <frontend_class>required-entry validate-length maximum-length-50</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
            </group>
            <group id="avatax_address_validation" translate="label" sortOrder="7" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>AvaTax - Address Validation</label>
                <field id="address_validation_enabled" translate="label comment" type="select" sortOrder="4010" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/address_validation_enabled</config_path>
                    <label>Enable Address Validation</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment>Enable validation of shipping address using the AvaTax Address Validation API.</comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="address_validation_countries_enabled" translate="label comment" type="multiselect" sortOrder="4020" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/address_validation_countries_enabled</config_path>
                    <label>Enabled Countries</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\AddressValidationCountries</source_model>
                    <comment>Select which countries to enable for address validation. AvaTax Address Validation currently only supports United States and Canada.</comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="address_validation_enabled">1</field>
                    </depends>
                </field>
                <field id="address_validation_user_has_choice" translate="label comment" type="select" sortOrder="4030" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/address_validation_user_has_choice</config_path>
                    <label>Allow User To Choose Original (Invalid) Address</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment><![CDATA[Set this to <strong>Yes</strong> to allow the user to choose between the original and validated addresses (valid address will be selected by default). If set to <strong>No</strong>, user will be required to use the validated address or update their original address. This setting is ignored in the backend and the user will always have a choice.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="address_validation_enabled">1</field>
                    </depends>
                </field>
                <field id="address_validation_instructions_with_choice" translate="label comment" type="textarea" sortOrder="4040" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/address_validation_instructions_with_choice</config_path>
                    <label>Address Validation Instructions</label>
                    <comment><![CDATA[When user progresses to the <strong>Review & Payments</strong> step of the checkout, this text will be displayed above the <strong>Suggested Address</strong> and <strong>Original Address</strong> checkboxes.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="address_validation_enabled">1</field>
                        <field id="address_validation_user_has_choice">1</field>
                    </depends>
                </field>
                <field id="address_validation_instructions_without_choice" translate="label comment" type="textarea" sortOrder="4050" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/address_validation_instructions_without_choice</config_path>
                    <label>Address Validation Instructions</label>
                    <comment><![CDATA[When user progresses to the <strong>Review & Payments</strong> step of the checkout, this text will be displayed above the suggested address.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="address_validation_enabled">1</field>
                        <field id="address_validation_user_has_choice">0</field>
                    </depends>
                </field>
                <field id="address_validation_error_instructions" translate="label comment" type="textarea" sortOrder="4060" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/address_validation_error_instructions</config_path>
                    <label>Address Validation Error Instructions</label>
                    <comment>This text will be displayed when there is an error in the address validation process. The element assigned the "error-message" class will be filled with the error message summary returned by AvaTax.</comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="address_validation_enabled">1</field>
                    </depends>
                </field>
            </group>
            <group id="avatax_customs" translate="label" sortOrder="7" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>AvaTax - Customs</label>
                <field id="enabled" translate="label" type="select" sortOrder="10" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Enable Duty</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment><![CDATA[
                        Duty include duties, fees and taxes relevant to cross border shipments.
                        This feature must be enabled in your Avalara account. Note that the proper use of this feature requires appropriate
                        configuration of <strong>Cross Border Classes</strong> (see Stores > AvaTax > Cross Border Classes) and assignment
                        of <strong>Cross Border Types</strong> to products.
                    ]]></comment>
                </field>
                <field id="map_shipping_methods" translate="label" type="label" sortOrder="20" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label><![CDATA[<strong>Map Shipping Methods</strong>]]></label>
                    <comment><![CDATA[Customs tax calculations may vary based on what type of shipping method is being used. Each of the Magento enabled shipping methods must be mapped to an AvaTax Shipping Mode to ensure accurate calculations. Note that you must enable a shipping method at the currently viewed admin scope in order for it to be available here.]]></comment>
                    <!-- Reference: https://github.com/magento/magento2/issues/2340
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                    -->
                </field>
                <field id="ground_shipping_methods" translate="label" type="multiselect" sortOrder="30" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Ground Shipping Methods</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\AvailableShippingMethods</source_model>
                    <comment><![CDATA[Select all ground shipping methods. Ensure that the shipping methods selected above are not selected in either of the other shipping method lists.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <!--<field id="air_shipping_methods" translate="label" type="multiselect" sortOrder="40" showInDefault="1" showInWebsite="1" showInStore="1">-->
                    <!--<label>Air Shipping Methods</label>-->
                    <!--<source_model>ClassyLlama\AvaTax\Model\Config\Source\AvailableShippingMethods</source_model>-->
                    <!--<comment><![CDATA[Select all air shipping methods. Ensure that the shipping methods selected above are not selected in either of the other shipping method lists.]]></comment>-->
                    <!--<depends>-->
                        <!--<field id="enabled">1</field>-->
                    <!--</depends>-->
                <!--</field>-->
                <!--<field id="ocean_shipping_methods" translate="label" type="multiselect" sortOrder="30" showInDefault="1" showInWebsite="1" showInStore="1">-->
                    <!--<label>Ocean Shipping Methods</label>-->
                    <!--<source_model>ClassyLlama\AvaTax\Model\Config\Source\AvailableShippingMethods</source_model>-->
                    <!--<comment><![CDATA[Select all ocean shipping methods. Ensure that the shipping methods selected above are not selected in either of the other shipping method lists.]]></comment>-->
                    <!--<depends>-->
                        <!--<field id="enabled">1</field>-->
                    <!--</depends>-->
                <!--</field>-->
                <!--<field id="custom_shipping_methods_map" translate="label" sortOrder="40" showInDefault="1" showInWebsite="1" showInStore="1" canRestore="1">-->
                    <!--<label>Custom Shipping Mode Mapping</label>-->
                    <!--<frontend_model>ClassyLlama\AvaTax\Block\Adminhtml\Form\Field\CustomShippingMethods</frontend_model>-->
                    <!--<backend_model>Magento\Config\Model\Config\Backend\Serialized\ArraySerialized</backend_model>-->
                    <!--<comment>-->
                        <!--<![CDATA[If using an integration with a third-party shipping service, you can use this custom mapping to associate the specific shipping method codes stored on orders with a shipping mode.]]>-->
                    <!--</comment>-->
                <!--</field>-->
                <!--<field id="default_shipping_mode" translate="label comment" type="select" sortOrder="50" showInDefault="1" showInWebsite="1" showInStore="1">-->
                    <!--<label>Default Shipping Mode</label>-->
                    <!--<source_model>ClassyLlama\AvaTax\Model\Config\Source\DefaultCrossBorderType</source_model>-->
                    <!--<comment><![CDATA[The shipping mode that should be sent to AvaTax if the shipping method is not mapped in the multiselects above.]]></comment>-->
                    <!--<depends>-->
                        <!--<field id="enabled">1</field>-->
                    <!--</depends>-->
                <!--</field>-->
                <!--<field id="default_border_type" translate="label comment" type="select" sortOrder="20" showInDefault="1" showInWebsite="1" showInStore="1">-->
                    <!--<label>Default Border Type</label>-->
                    <!--<source_model>ClassyLlama\AvaTax\Model\Config\Source\CrossBorderClass\CrossBorderType</source_model>-->
                    <!--<comment><![CDATA[If a product is not assigned to a Cross Border Type, this will be the default attribute value.]]></comment>-->
                    <!--<depends>-->
                        <!--<field id="enabled">1</field>-->
                    <!--</depends>-->
                <!--</field>-->
            </group>
            <group id="avatax_document_management" translate="label" sortOrder="7" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>AvaTax - Document Management</label>
                <field id="enabled" type="select" translate="label" sortOrder="100" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Enable Document Management</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment>AvaTax Document Management allows users to upload documents that verify that they’re tax exempt and if they do, they won’t be charged tax in the checkout. This feature must be enabled in your Avalara account.</comment>
                </field>
                <field id="enabled_countries" translate="label comment" type="multiselect" sortOrder="200" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Enabled Countries</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\DocumentManagementCountries</source_model>
                    <comment>Select which countries to enable for Document Management.</comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="checkout_link_text_new_cert_no_certs_exist" translate="label" type="text" sortOrder="500" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Checkout Link Text: New Cert(No certs exist)</label>
                    <comment>The text of the link that appears at checkout allowing the initiation of a new certificate. This text shows if there are no existing certificates for the customer.</comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="checkout_link_text_new_cert_certs_exist" translate="label" type="text" sortOrder="600" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Checkout Link Text: New Cert(Certs exist)</label>
                    <comment>The text of the link that appears at checkout allowing the initiation of a new certificate. This text shows if there are already existing certificates for the customer.</comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="checkout_link_text_manage_existing_certs" translate="label" type="text" sortOrder="700" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Checkout Link Text: Manage Existing Certs</label>
                    <comment>The text of the link that appears at checkout allowing the user to navigate to certificate management in My Account. This text shows only if there are existing certificates for the customer.</comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="custom_status_name_certificate" translate="label" type="select" sortOrder="800" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Change Status name of the Certificate</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment>Rename Status of the Certificate</comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="approved_status_name" translate="label" type="text" sortOrder="900" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>'Approved' Status Name(Default name)</label>
                    <comment>This text will be shown instead of the default certificate status name('Approved') in the 'Tax Certificates' grid of the My Account.</comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="custom_status_name_certificate">1</field>
                    </depends>
                </field>
                <field id="denied_status_name" translate="label" type="text" sortOrder="900" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>'Denied' Status Name(Default name)</label>
                    <comment>This text will be shown instead of the default certificate status name('Denied') in the 'Tax Certificates' grid of the My Account.</comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="custom_status_name_certificate">1</field>
                    </depends>
                </field>
                <field id="pending_status_name" translate="label" type="text" sortOrder="1000" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>'Pending' Status Name(Default name)</label>
                    <comment>This text will be shown instead of the default certificate status name('Pending') in the 'Tax Certificates' grid of the My Account.</comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="custom_status_name_certificate">1</field>
                    </depends>
                </field>
            </group>
            <group id="avatax_advanced" translate="label" sortOrder="8" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>AvaTax - Advanced</label>
                <field id="avatax_adjustment_taxes" translate="label" type="select" sortOrder="1900" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Enable tax calculation for Adjustment Refund and Adjustment Fee </label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment><![CDATA[By default, Magento does not calculate taxes for Adjustment Refund and Adjustment Fee. If this option will be enabled, AvaTax will calculate Adjustment related taxes.]]></comment>
                </field>
                <field id="avatax_table_exemptions" translate="label" type="textarea" sortOrder="1910" showInDefault="1">
                    <label>Tables Exemptions List (comma-separated list)</label>
                    <comment><![CDATA[At each stage of ordering (adding to cart, choosing the payment address and delivery address, delivery method, etc.) the ClassyLama_Avatax extension monitors the correctness of the calculated taxes, updates their values through the Avalara service API and writes to certain tables in the database of the website.]]></comment>
                </field>
                <field id="error_handling_header" translate="label" type="label" sortOrder="2000" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label><![CDATA[<strong>Error Handling Settings</strong>]]></label>
                    <!-- Reference: https://github.com/magento/magento2/issues/2340
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                    -->
                </field>
                <field id="response_logging_enabled" translate="label" type="select" sortOrder="2015" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Enable logging of AvaTax response data</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment><![CDATA[By default, AvaTax API response data for Orders, Invoices, and Credit Memo API calls are stored in the avatax_sales_order, avatax_sales_invoice, and avatax_sales_creditmemo tables. This data is stored in case there is ever a need to compare the exact response data from AvaTax with what is saved on the Magento tax fields. Disable this logging if you won't ever need this]]></comment>
                </field>
                <field id="error_action" translate="label comment" type="select" sortOrder="2010" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/error_action</config_path>
                    <label>Error Action</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\ErrorAction</source_model>
                    <comment><![CDATA[What should happen if Magento is unable to retrieve taxes from the AvaTax API. Regardless of which option is selected, if there is an error in the AvaTax tax estimation, the extension will fall back to using native Magento tax rules. However if <strong>Disable checkout & show error message</strong> is selected, the extension will prevent users and admins from placing orders.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="error_action_disable_checkout_message_frontend" translate="label comment" type="textarea" sortOrder="2020" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/error_action_disable_checkout_message_frontend</config_path>
                    <label>Frontend Error Message</label>
                    <comment><![CDATA[This error message will be displayed to user if there is an error calculating taxes and if <strong>Disable checkout & show error message</strong> is selected above.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="error_action">1</field>
                    </depends>
                </field>
                <field id="error_action_disable_checkout_message_backend" translate="label comment" type="textarea" sortOrder="2030" showInDefault="1" showInWebsite="1" showInStore="1">
                    <config_path>tax/avatax/error_action_disable_checkout_message_backend</config_path>
                    <label>Backend Error Message</label>
                    <comment><![CDATA[This error message will be displayed to admin if there is an error calculating taxes and if <strong>Disable checkout & show error message</strong> is selected above.]]></comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="error_action">1</field>
                    </depends>
                </field>
                <field id="avatax_timeout" translate="label comment" type="text" sortOrder="2050" showInDefault="1" showInWebsite="1" showInStore="1" canRestore="1">
                    <label>AvaTax API Timeout</label>
                    <comment><![CDATA[This field defines how long Magento should wait to hear from AvaTax's servers before assuming no response will be given.]]></comment>
                </field>
                <field id="logging_settings_header" translate="label" type="label" sortOrder="5000" showInDefault="1" showInWebsite="0" showInStore="0">
                    <label><![CDATA[<strong>Logging Settings</strong>]]></label>
                    <!-- Reference: https://github.com/magento/magento2/issues/2340
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                    -->
                </field>
                <field id="logging_db_level" translate="label" type="select" sortOrder="5010" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/logging_db_level</config_path>
                    <label>Database Log Level</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\LogLevel</source_model>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                    <comment><![CDATA[<strong>Warning</strong> is recommended for production use.]]></comment>
                </field>
                <field id="logging_db_detail" translate="label" type="select" sortOrder="5020" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/logging_db_detail</config_path>
                    <label>Database Log Detail</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\LogDetail</source_model>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                    <comment><![CDATA[<strong>Minimal</strong> is recommended for production use.]]></comment>
                </field>
                <field id="logging_db_lifetime" translate="label" type="text" sortOrder="5030" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/logging_db_lifetime</config_path>
                    <label>Database Log Record Lifetime</label>
                    <comment>Required. Days before entries are auto-purged.</comment>
                    <frontend_class>validate-number</frontend_class>
                    <validate>required-entry integer validate-greater-than-zero</validate>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="logging_file_enabled" translate="label" type="select" sortOrder="5040" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/logging_file_enabled</config_path>
                    <label>Enable Logging To File</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                    <comment>Archiving of log files is affected by System -> Admin Actions Log Archiving</comment>
                </field>
                <field id="logging_file_mode" translate="label" type="select" sortOrder="5050" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/logging_file_mode</config_path>
                    <label>File Log Mode</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\LogFileMode</source_model>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="logging_file_enabled">1</field>
                    </depends>
                    <comment>Log files are located in the magento var/log/ directory</comment>
                </field>
                <field id="logging_file_builtin_rotation_enabled" translate="label" type="select" sortOrder="5060" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/logging_file_builtin_rotation_enabled</config_path>
                    <label>Enable Built-In Log File Rotation</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="logging_file_enabled">1</field>
                        <field id="logging_file_mode">2</field>
                    </depends>
                    <comment>Automatic log file rotation will allow you to control how much history is maintained in
                        the AvaTax log files, and separate them by day. For more efficient management of log files you
                        should disable this option and use something like logrotate to handle the rotation of log files
                        at the system level.
                    </comment>
                </field>
                <field id="logging_file_builtin_rotation_max_files" translate="label" type="text" sortOrder="5070" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/logging_file_builtin_rotation_max_files</config_path>
                    <label>Built-In Log File Rotation Max Files</label>
                    <frontend_class>validate-number</frontend_class>
                    <validate>required-entry integer validate-greater-than-zero</validate>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="logging_file_enabled">1</field>
                        <field id="logging_file_mode">2</field>
                        <field id="logging_file_builtin_rotation_enabled">1</field>
                    </depends>
                    <comment>The number of files/days to maintain in the log directory when rotating. The log file rotator
                        will create a new file each day.
                    </comment>
                </field>
                <field id="logging_file_level" translate="label" type="select" sortOrder="5080" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/logging_file_level</config_path>
                    <label>File Log Level</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\LogLevel</source_model>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="logging_file_enabled">1</field>
                    </depends>
                    <comment><![CDATA[<strong>Warning</strong> is recommended for production use.]]></comment>
                </field>
                <field id="logging_file_detail" translate="label" type="select" sortOrder="5090" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/logging_file_detail</config_path>
                    <label>File Log Detail</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\LogDetail</source_model>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="logging_file_enabled">1</field>
                    </depends>
                    <comment><![CDATA[<strong>Normal</strong> is recommended for production use.]]></comment>
                </field>
                <field id="queue_processing_header" translate="label" type="label" sortOrder="6000" showInDefault="1" showInWebsite="0" showInStore="0">
                    <label><![CDATA[<strong>Queue Processing Settings</strong>]]></label>
                    <comment><![CDATA[If <strong><a href="#tax_avatax">Tax Mode</a></strong> is set to <strong>Estimate Tax & Submit Transactions to AvaTax</strong>, then queue processing is enabled. Otherwise the queue will not submit invoices and credit memos to AvaTax as transaction submissions are disabled.]]></comment>
                    <!-- Reference: https://github.com/magento/magento2/issues/2340
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                    -->
                </field>
                <field id="queue_processing_type" translate="label" type="select" sortOrder="6005" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/queue_processing_type</config_path>
                    <label>Queue Processing Type</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\QueueProcessingType</source_model>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="queue_submission_enabled">1</field>
                    </depends>
                    <comment>Normal Queue Processing - each item of Queue will be processed separately.
                             Batch Queue Processing - Queue will be processed by 1000 items batch.
                    </comment>
                </field>
                <field id="queue_admin_notification_enabled" translate="label" type="select" sortOrder="6010" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/queue_admin_notification_enabled</config_path>
                    <label>Enable Queue Admin Notification</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="queue_submission_enabled">1</field>
                    </depends>
                    <comment>A notification will be displayed at the top of any admin page if there are pending queue records waiting to be submitted to AvaTax but no attempts have been made in the last 24 hours to submit them.</comment>
                </field>
                <field id="queue_failure_notification_enabled" translate="label" type="select" sortOrder="6020" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/queue_failure_notification_enabled</config_path>
                    <label>Enable Queue Failure Notification</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="queue_submission_enabled">1</field>
                    </depends>
                    <comment>A notification will be displayed at the top of any admin page if there are any failed queue records.</comment>
                </field>
                <field id="queue_max_retry_attempts" translate="label comment" type="text" sortOrder="6030" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/queue_max_retry_attempts</config_path>
                    <label>Max Queue Retry Attempts</label>
                    <comment>Please enter a number 1 or greater in this field.</comment>
                    <frontend_class>validate-number</frontend_class>
                    <validate>required-entry integer validate-greater-than-zero</validate>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="queue_complete_lifetime" translate="label comment" type="text" sortOrder="6040" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/queue_complete_lifetime</config_path>
                    <label>Complete Queue Lifetime</label>
                    <comment>Required. Days before entries are auto-purged.</comment>
                    <frontend_class>validate-number</frontend_class>
                    <validate>required-entry integer validate-greater-than-zero</validate>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="queue_submission_enabled">1</field>
                    </depends>
                </field>
                <field id="queue_failed_lifetime" translate="label comment" type="text" sortOrder="6050" showInDefault="1" showInWebsite="0" showInStore="0">
                    <config_path>tax/avatax/queue_failed_lifetime</config_path>
                    <label>Failed Queue Lifetime</label>
                    <comment>Required. Days before entries are auto-purged.</comment>
                    <frontend_class>validate-number</frontend_class>
                    <validate>required-entry integer validate-greater-than-zero</validate>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="queue_submission_enabled">1</field>
                    </depends>
                </field>
                <group id="attribute_codes" sortOrder="6060" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Allowed Attributes</label>
                    <field id="paymentdetails" type="text" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Payment details attribute codes</label>
                        <comment>Comma-separated list</comment>
                    </field>
                    <field id="shippinginformation" type="text" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Shipping information attribute codes</label>
                        <comment>Comma-separated list</comment>
                    </field>
                    <field id="quotedetailsitem" type="text" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Quote details item attribute codes</label>
                        <comment>Comma-separated list</comment>
                    </field>
                    <field id="cart" type="text" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Cart attribute codes</label>
                        <comment>Comma-separated list</comment>
                    </field>
                    <field id="order" type="text" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Order attribute codes</label>
                        <comment>Comma-separated list</comment>
                    </field>
                    <field id="invoice" type="text" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Invoice attribute codes</label>
                        <comment>Comma-separated list</comment>
                    </field>
                    <field id="creditmemo" type="text" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Credit memo attribute codes</label>
                        <comment>Comma-separated list</comment>
                    </field>
                    <field id="appliedtaxrate" type="text" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Applied tax rate attribute codes</label>
                        <comment>Comma-separated list</comment>
                    </field>
                    <field id="cartitem" type="text" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Cart item attribute codes</label>
                        <comment>Comma-separated list</comment>
                    </field>
                    <field id="orderitem" type="text" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Order item attribute codes</label>
                        <comment>Comma-separated list</comment>
                    </field>
                    <field id="invoiceitem" type="text" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Invoice item attribute codes</label>
                        <comment>Comma-separated list</comment>
                    </field>
                    <field id="creditmemoitem" type="text" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Credit memo item attribute codes</label>
                        <comment>Comma-separated list</comment>
                    </field>
                    <field id="totals" type="text" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Totals attribute codes</label>
                        <comment>Comma-separated list</comment>
                    </field>
                </group>
            </group>
            <group id="avatax_certificate_capture" translate="label" sortOrder="9" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>AvaTax - Certificate Capture Management</label>
                <field id="disable_certcapture_auto_validation" type="select" translate="label" sortOrder="100" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Disable certificates auto validation</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment><![CDATA[By default, new certificates are automatically validated in CertCapture, unless this behavior is altered.]]></comment>
                </field>
            </group>
            <group id="classes">
                <field id="shipping_tax_class">
                    <comment>This setting will be ignored if AvaTax is enabled, as shipping Tax Code is hard-coded as FR020100 and AvaTax will determine whether tax applies to an order.</comment>
                </field>
                <field id="wrapping_tax_class">
                    <comment>This setting applies only to gift wrapping options, not Gift Cards; if AvaTax is enabled, the Gift Card Tax Code is hard-coded as PG050000 and AvaTax will determine whether tax applies to an order for a Gift Card.</comment>
                </field>
            </group>
            <group id="calculation">
                <field id="algorithm">
                    <comment>This setting will be ignored if AvaTax is enabled, as AvaTax always calculates tax on a row level.</comment>
                </field>
                <field id="based_on">
                    <comment>This setting will be ignored if AvaTax is enabled, as AvaTax always uses the shipping address for estimation.</comment>
                </field>
                <field id="price_includes_tax">
                    <comment>This setting will be ignored if AvaTax is enabled, as you must set your prices in Magento without taxes included so that AvaTax is the single system of record for tax estimation.</comment>
                </field>
                <field id="shipping_includes_tax">
                    <comment>This setting will be ignored if AvaTax is enabled, as AvaTax must be responsible for calculating shipping tax.</comment>
                </field>
                <field id="apply_after_discount">
                    <comment>This setting will be ignored if AvaTax is enabled, as AvaTax doesn't support line-level discounts.</comment>
                </field>
                <field id="discount_tax">
                    <comment>This setting will be ignored if AvaTax is enabled, as AvaTax doesn't support line-level discounts.</comment>
                </field>
                <field id="apply_tax_on">
                    <comment>This setting will be ignored if AvaTax is enabled, as AvaTax should always calculate tax after discounts are applied in Magento.</comment>
                </field>
                <field id="cross_border_trade_enabled">
                    <comment>This setting will be ignored if AvaTax is enabled.</comment>
                </field>
            </group>
            <group id="defaults">
                <field id="postcode">
                    <comment>If AvaTax is enabled, it is highly recommended that you leave this field blank. Otherwise, the number of AvaTax API requests will increase significantly, as every time a guest adds a product to their cart, AvaTax will calculate tax for the postal code entered above.</comment>
                </field>
            </group>
            <group id="weee">
                <field id="enable">
                    <comment>The AvaTax extension does not support the usage of Fixed Product Taxes, so do not enable this option.</comment>
                </field>
            </group>
        </section>
    </system>
</config>
